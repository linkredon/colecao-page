(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{575:()=>{},4245:(e,a,r)=>{Promise.resolve().then(r.bind(r,7601)),Promise.resolve().then(r.bind(r,8773)),Promise.resolve().then(r.t.bind(r,7459,23)),Promise.resolve().then(r.t.bind(r,6593,23)),Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.t.bind(r,6508,23)),Promise.resolve().then(r.t.bind(r,8501,23)),Promise.resolve().then(r.t.bind(r,575,23)),Promise.resolve().then(r.t.bind(r,6084,23)),Promise.resolve().then(r.t.bind(r,8175,23))},6084:()=>{},6508:()=>{},6593:e=>{e.exports={style:{fontFamily:"'Orbitron', 'Orbitron Fallback'",fontStyle:"normal"},className:"__className_e087fb",variable:"__variable_e087fb"}},7459:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},7601:(e,a,r)=>{"use strict";r.d(a,{default:()=>A});var s=r(5155),t=r(813),i=r(8773),c=r(2115),o=r(9840),n=r(7168),l=r(8145),d=r(4616),m=r(9946);let h=(0,m.A)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var u=r(1976);let x=(0,m.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var g=r(3786),y=r(5968);let p=(0,m.A)("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]),v=(0,m.A)("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]),j=e=>{let{className:a="",size:r="default"}=e,{visualizationType:i,setVisualizationType:c}=(0,t.h)(),o="sm"===r?"h-7 w-7 p-1":"h-9 w-9 p-2";return(0,s.jsxs)("div",{className:"flex items-center space-x-1 ".concat(a),children:[(0,s.jsx)(n.$,{variant:"list"===i?"default":"outline",size:"icon",className:"".concat(o," ").concat("list"===i?"bg-blue-600 hover:bg-blue-700":"border-gray-700 text-gray-400 hover:text-gray-200 hover:bg-gray-800"),onClick:()=>c("list"),title:"Visualiza\xe7\xe3o em lista",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"grid"===i?"default":"outline",size:"icon",className:"".concat(o," ").concat("grid"===i?"bg-blue-600 hover:bg-blue-700":"border-gray-700 text-gray-400 hover:text-gray-200 hover:bg-gray-800"),onClick:()=>c("grid"),title:"Visualiza\xe7\xe3o em grade normal",children:(0,s.jsx)(p,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"details"===i?"default":"outline",size:"icon",className:"".concat(o," ").concat("details"===i?"bg-blue-600 hover:bg-blue-700":"border-gray-700 text-gray-400 hover:text-gray-200 hover:bg-gray-800"),onClick:()=>c("details"),title:"Visualiza\xe7\xe3o em detalhes",children:(0,s.jsx)(v,{className:"h-4 w-4"})})]})};var b=r(855),f=r(809);let N=c.memo(e=>{let{cardId:a}=e,[r,i]=(0,c.useState)(0),{quantidadeNaColecao:o}=(0,t.h)();return(0,c.useEffect)(()=>{let e=!0;return(async()=>{try{let r=await o(a);e&&i(r)}catch(e){console.error("Erro ao buscar quantidade:",e)}})(),()=>{e=!1}},[a,o]),(0,s.jsxs)(s.Fragment,{children:[r,"x"]})});N.displayName="QuantidadeAsync";let w=c.memo(e=>{let{card:a}=e,[r,i]=(0,c.useState)(0),[o,l]=(0,c.useState)(!1),[m,h]=(0,c.useState)("Adicionar \xe0 Cole\xe7\xe3o"),u=c.useRef([]),{quantidadeNaColecao:x,adicionarCarta:g,mostrarCartasNaColecao:y,atualizarPesquisa:p}=(0,t.h)();(0,c.useEffect)(()=>()=>{u.current.forEach(e=>clearTimeout(e))},[]),(0,c.useEffect)(()=>{let e=!0;return(async()=>{try{let r=await x(a.id);e&&(i(r),r>0&&h("Adicionar \xe0 Cole\xe7\xe3o (".concat(r,"x)")))}catch(e){console.error("Erro ao buscar quantidade:",e)}})(),()=>{e=!1}},[a.id,x]);let v=async()=>{if(!o)try{l(!0),await g(a),h("Adicionada \xe0 Cole\xe7\xe3o!");let e=await x(a.id),r=setTimeout(()=>{i(e),h("Adicionar \xe0 Cole\xe7\xe3o (".concat(e,"x)")),l(!1)},1500);if(u.current.push(r),!y){let e=setTimeout(async()=>{try{await p()}catch(e){console.error("Erro ao atualizar pesquisa:",e)}},2e3);u.current.push(e)}}catch(a){console.error("Erro ao adicionar carta:",a),h("Erro ao adicionar");let e=setTimeout(()=>{h("Adicionar \xe0 Cole\xe7\xe3o"),l(!1)},1500);u.current.push(e)}};return(0,s.jsxs)(n.$,{onClick:v,disabled:o,className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-2"}),m]})});w.displayName="AdicionarCartaButton";let k=c.memo(e=>{let{card:a}=e,[r,i]=(0,c.useState)(!1),[o,l]=(0,c.useState)("Adicionar ao Deck"),{adicionarAoDeck:d}=(0,t.h)(),m=c.useRef([]);(0,c.useEffect)(()=>()=>{m.current.forEach(e=>clearTimeout(e))},[]);let u=async()=>{if(!r)try{i(!0),d&&await d(a),l("Adicionada ao Deck!");let e=setTimeout(()=>{l("Adicionar ao Deck"),i(!1)},1500);m.current.push(e)}catch(a){console.error("Erro ao adicionar carta ao deck:",a),l("Erro ao adicionar");let e=setTimeout(()=>{l("Adicionar ao Deck"),i(!1)},1500);m.current.push(e)}};return(0,s.jsxs)(n.$,{onClick:u,disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(h,{className:"w-4 h-4 mr-2"}),o]})});k.displayName="AdicionarAoDeckButton";let _={setCode:e=>{try{if(!e||void 0===e.set_code||null===e.set_code)return"N/A";if("string"!=typeof e.set_code)return String(e.set_code);return e.set_code.toUpperCase()}catch(e){return console.warn("Erro ao acessar set_code",e),"N/A"}},rarity:e=>{try{if(!e)return"comum";return e.rarity||"comum"}catch(e){return console.warn("Erro ao acessar rarity",e),"comum"}},typeLine:e=>{try{if(!e)return"Tipo n\xe3o especificado";return e.type_line||"Tipo n\xe3o especificado"}catch(e){return console.warn("Erro ao acessar type_line",e),"Tipo n\xe3o especificado"}},setName:e=>{try{if(!e)return"Cole\xe7\xe3o desconhecida";return e.set_name||"Cole\xe7\xe3o desconhecida"}catch(e){return console.warn("Erro ao acessar set_name",e),"Cole\xe7\xe3o desconhecida"}}};function C(){var e,a,r,i,d,m;let{card:h,isModalOpen:y,closeModal:p,quantidadeNaColecao:v,adicionarCarta:C,adicionarAoDeck:A,mostrarCartasNaColecao:E=!0,atualizarPesquisa:z}=(0,t.h)(),[P,S]=(0,c.useState)(!1);if(!y||!h)return null;let T=e=>{let a=e.name.toLowerCase().replace(/[^a-z0-9]/g,"-");return"https://www.ligamagic.com.br/?view=cards/card&card=".concat(encodeURIComponent(a))},O=e=>"https://gatherer.wizards.com/Pages/Search/Default.aspx?name=+[".concat(encodeURIComponent(e.name),"]");return(0,s.jsx)(o.lG,{open:y,onOpenChange:e=>!e&&p(),children:(0,s.jsxs)(o.Cf,{className:"max-w-3xl rounded-lg text-card-foreground bg-gray-800/80 backdrop-blur-xl shadow-2xl overflow-hidden border-0",children:[(0,s.jsx)(o.c7,{children:(0,s.jsxs)(o.L3,{className:"text-xl text-white flex justify-between items-center",children:[(0,s.jsx)("span",{children:h.name}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(j,{size:"sm",className:"mr-2"}),(0,s.jsx)(n.$,{size:"sm",variant:"ghost",onClick:()=>S(!P),className:"h-7 px-2 ".concat(P?"text-red-400 hover:text-red-300":"text-gray-400 hover:text-gray-300"),children:(0,s.jsx)(u.A,{className:"h-4 w-4 ".concat(P?"fill-red-400":"")})}),(0,s.jsx)(n.$,{size:"sm",variant:"ghost",onClick:()=>window.navigator.clipboard.writeText("".concat(window.location.origin,"/card/").concat(h.id)),className:"h-7 px-2 text-gray-400 hover:text-gray-300",title:"Copiar link da carta",children:(0,s.jsx)(x,{className:"h-4 w-4"})})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(null===(e=h.image_uris)||void 0===e?void 0:e.normal)?(0,s.jsx)("img",{src:h.image_uris.normal,alt:h.name,className:"rounded-lg max-h-[80vh] object-contain",crossOrigin:"anonymous"}):(null===(i=h.card_faces)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(a=r.image_uris)||void 0===a?void 0:a.normal)?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("img",{src:h.card_faces[0].image_uris.normal,alt:h.name+" (frente)",className:"rounded-lg max-h-[38vh] object-contain",crossOrigin:"anonymous"}),(null===(m=h.card_faces[1])||void 0===m?void 0:null===(d=m.image_uris)||void 0===d?void 0:d.normal)&&(0,s.jsx)("img",{src:h.card_faces[1].image_uris.normal,alt:h.name+" (verso)",className:"rounded-lg max-h-[38vh] object-contain",crossOrigin:"anonymous"})]}):(0,s.jsx)("div",{className:"w-full h-96 bg-gray-700 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400",children:"Imagem n\xe3o dispon\xedvel"})})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white",children:h.name}),(0,s.jsx)("p",{className:"text-gray-300",children:h.mana_cost}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:_.typeLine(h)})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded-md",children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:h.oracle_text}),h.power&&h.toughness&&(0,s.jsxs)("p",{className:"text-right text-gray-300 mt-2",children:[h.power,"/",h.toughness]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Edi\xe7\xe3o:"}),(0,s.jsxs)("p",{children:[_.setName(h)," (",_.setCode(h),")"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Raridade:"}),(0,s.jsx)("p",{className:"capitalize",children:_.rarity(h)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Artista:"}),(0,s.jsx)("p",{children:h.artist})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Colecionador:"}),(0,s.jsxs)("p",{children:["#",h.collector_number]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded-md",children:[(0,s.jsx)("h4",{className:"text-white font-medium mb-2",children:"Na sua cole\xe7\xe3o"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Quantidade:"}),(0,s.jsx)(l.E,{variant:"outline",className:"border-blue-500 text-blue-400",children:(0,s.jsx)(N,{cardId:h.id})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(w,{card:h}),A&&(0,s.jsx)(k,{card:h}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(n.$,{onClick:()=>window.open(O(h),"_blank"),variant:"outline",className:"border-purple-500 text-purple-400 hover:bg-purple-600/10",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ver no Gatherer"]}),(0,s.jsxs)(n.$,{onClick:()=>window.open(T(h),"_blank"),variant:"outline",className:"border-purple-500 text-purple-400 hover:bg-purple-600/10",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ver na LigaMagic"]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-600 pt-4",children:(0,s.jsx)(b.A,{card:h,className:"w-full",showCreateDeck:!0,showCategorySelect:!0})}),(0,s.jsx)(f.A,{card:h,className:"border-t border-gray-600 pt-4"})]})]})]})})}function A(e){let{children:a}=e,{currentCollection:r,adicionarCarta:c}=(0,i.U)(),o=async e=>{if(!(null==r?void 0:r.cards))return 0;let a=r.cards.find(a=>a.card.id===e);return a?a.quantity:0},n=async e=>{try{c(e)}catch(e){throw console.error("Erro ao adicionar carta:",e),e}},l=async()=>{console.log("Pesquisa atualizada")};return(0,s.jsxs)(t.B,{getQuantidadeNaColecao:o,adicionarCartaAColecao:n,onAtualizarPesquisa:l,children:[a,(0,s.jsx)(C,{})]})}},8175:()=>{},9324:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[943,25,444,953,275,166,670,286,441,684,358],()=>a(4245)),_N_E=e.O()}]);